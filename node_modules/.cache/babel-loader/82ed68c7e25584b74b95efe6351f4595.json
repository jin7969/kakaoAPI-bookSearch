{"ast":null,"code":"var _jsxFileName = \"/Users/asj/Documents/GitHub/test-app/src/components/kakao_book/BookApp.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { bookSearch } from \"./api\";\nimport BookItem from \"./BookItem\";\nimport Search from \"./Search\";\nimport Login from \"./Login\";\nimport SideBar from \"./SideBar\";\nimport DarkMode from \"./DarkMode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction BookApp({\n  themeToggler\n}) {\n  _s();\n\n  const [books, setBooks] = useState([]);\n  const [text, setText] = useState(\"\");\n  const [query, setQuery] = useState(\"\");\n  const [selected, setSelected] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  const handleSelected = (id, title, price) => {\n    setSelected(selected => [...selected, {\n      id,\n      title\n    }]);\n    setTotalPrice(totalPrice + price);\n  };\n\n  const deleteList = (index, price) => {\n    const array = [];\n\n    for (let i = 0; i < selected.length; i++) {\n      if (selected[i].id !== index) {\n        array.push(selected[i]);\n      } else {\n        setTotalPrice(totalPrice - price);\n      }\n    }\n\n    setSelected(array);\n  };\n\n  useEffect(() => {\n    if (query.length > 0) {\n      fetchData(query);\n    }\n  }, [query]);\n\n  const fetchData = async query => {\n    const params = {\n      query: query,\n      sort: \"accuracy\",\n      page: 1,\n      size: 8\n    };\n    const {\n      data\n    } = await bookSearch(params);\n    setBooks(data.documents);\n  };\n\n  const handleKeyEnter = () => {\n    setQuery(text);\n  };\n\n  const onTextUpdate = e => {\n    setText(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Book, {\n    query: true,\n    children: [/*#__PURE__*/_jsxDEV(SideBar, {\n      selected: selected,\n      totalPrice: totalPrice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Header, {\n      query: query,\n      children: [/*#__PURE__*/_jsxDEV(Search, {\n        enter: handleKeyEnter,\n        onTextUpdate: onTextUpdate,\n        text: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), query && books.map((book, index) => /*#__PURE__*/_jsxDEV(BookItem, {\n      id: index,\n      book: book,\n      thumbnail: book.thumbnail,\n      title: book.title,\n      authors: book.authors,\n      contents: book.contents,\n      price: book.sale_price,\n      handleSelected: handleSelected,\n      deleteList: deleteList\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(DarkMode, {\n      themeToggler: themeToggler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(BookApp, \"ABDYRjKpgErQ1lArtp58CMf7Tbo=\");\n\n_c = BookApp;\nexport default BookApp;\nconst Book = styled.div`\n  display: flex;\n  height: 100vh;\n  align-items: center;\n  flex-direction: column;\n  background: url(\"https://www.kakaocommerce.com/resources/images/pc/visual_ad.png\")\n    center/cover no-repeat;\n  background-size: 100% 78%;\n  ${props => {\n  if (!props.query) {\n    return css`\n        background: none;\n      `;\n  }\n}}\n\n`;\n_c2 = Book;\nconst Header = styled.div`\n  display: flex;\n  width: 55%;\n  justify-content: space-between;\n  margin: 1.5em 0;\n  ${props => {\n  if (!props.query) {\n    return css`\n        height: 90vh;\n        align-items: center;\n        justify-content: space-around;\n      `;\n  }\n}}\n`;\n_c3 = Header;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"BookApp\");\n$RefreshReg$(_c2, \"Book\");\n$RefreshReg$(_c3, \"Header\");","map":{"version":3,"sources":["/Users/asj/Documents/GitHub/test-app/src/components/kakao_book/BookApp.jsx"],"names":["React","useEffect","useState","styled","css","bookSearch","BookItem","Search","Login","SideBar","DarkMode","BookApp","themeToggler","books","setBooks","text","setText","query","setQuery","selected","setSelected","totalPrice","setTotalPrice","handleSelected","id","title","price","deleteList","index","array","i","length","push","fetchData","params","sort","page","size","data","documents","handleKeyEnter","onTextUpdate","e","target","value","map","book","thumbnail","authors","contents","sale_price","Book","div","props","Header"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { bookSearch } from \"./api\";\r\nimport BookItem from \"./BookItem\";\r\nimport Search from \"./Search\";\r\nimport Login from \"./Login\";\r\nimport SideBar from \"./SideBar\";\r\nimport DarkMode from \"./DarkMode\";\r\n\r\nfunction BookApp({ themeToggler }) {\r\n  const [books, setBooks] = useState([]);\r\n  const [text, setText] = useState(\"\");\r\n  const [query, setQuery] = useState(\"\");\r\n  const [selected, setSelected] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n  const handleSelected = (id, title, price) => {\r\n    setSelected((selected) => [...selected, { id, title }]);\r\n    setTotalPrice(totalPrice + price);\r\n  };\r\n\r\n  const deleteList = (index, price) => {\r\n    const array = [];\r\n    for (let i = 0; i < selected.length; i++) {\r\n      if (selected[i].id !== index) {\r\n        array.push(selected[i]);\r\n      } else {\r\n        setTotalPrice(totalPrice - price);\r\n      }\r\n    }\r\n    setSelected(array);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (query.length > 0) {\r\n      fetchData(query);\r\n    }\r\n  }, [query]);\r\n\r\n  const fetchData = async (query) => {\r\n    const params = {\r\n      query: query,\r\n      sort: \"accuracy\",\r\n      page: 1,\r\n      size: 8,\r\n    };\r\n    const { data } = await bookSearch(params);\r\n    setBooks(data.documents);\r\n  };\r\n\r\n  const handleKeyEnter = () => {\r\n    setQuery(text);\r\n  };\r\n\r\n  const onTextUpdate = (e) => {\r\n    setText(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <Book query>\r\n      <SideBar selected={selected} totalPrice={totalPrice} />\r\n      <Header query={query}>\r\n        <Search\r\n          enter={handleKeyEnter}\r\n          onTextUpdate={onTextUpdate}\r\n          text={text}\r\n        />\r\n        <Login />\r\n      </Header>\r\n      {query &&\r\n        books.map((book, index) => (\r\n          <BookItem\r\n            key={index}\r\n            id={index}\r\n            book={book}\r\n            thumbnail={book.thumbnail}\r\n            title={book.title}\r\n            authors={book.authors}\r\n            contents={book.contents}\r\n            price={book.sale_price}\r\n            handleSelected={handleSelected}\r\n            deleteList={deleteList}\r\n          />\r\n        ))}\r\n      <DarkMode themeToggler={themeToggler} />\r\n    </Book>\r\n  );\r\n}\r\n\r\nexport default BookApp;\r\n\r\nconst Book = styled.div`\r\n  display: flex;\r\n  height: 100vh;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  background: url(\"https://www.kakaocommerce.com/resources/images/pc/visual_ad.png\")\r\n    center/cover no-repeat;\r\n  background-size: 100% 78%;\r\n  ${(props) => {\r\n    if (!props.query) {\r\n      return css`\r\n        background: none;\r\n      `;\r\n    }\r\n  }}\r\n\r\n`;\r\nconst Header = styled.div`\r\n  display: flex;\r\n  width: 55%;\r\n  justify-content: space-between;\r\n  margin: 1.5em 0;\r\n  ${(props) => {\r\n    if (!props.query) {\r\n      return css`\r\n        height: 90vh;\r\n        align-items: center;\r\n        justify-content: space-around;\r\n      `;\r\n    }\r\n  }}\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}